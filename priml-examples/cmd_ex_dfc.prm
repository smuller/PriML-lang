priority A
priority B
 
main {

(*
    td <- spawn[if true then A else B] { ret 2 };

    x <- sync td;
    ret x
*)


(*
    change[if true then A else B];
    ret 0
*)



    t <- 
        let val m = cmd { 
            change[A];
            change[if true then B else A];
            ret 1 
        }
        in
            spawn[if true then A else B] { m }
        end;

    t' <- spawn[A] { ret 2 };

    x <- sync t;
    ret x


}